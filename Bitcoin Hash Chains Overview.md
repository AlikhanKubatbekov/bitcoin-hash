# Основные части цепочки хэшей в Биткоине
1. Хэширование транзакций (Transaction ID): Создание идентификаторов транзакций (txid).
2. Дерево Меркла: Построение корня Меркла из txid
3. Хэш блока: Связывание блоков в цепочку через хэш заголовка (Proof-of-Work).
4. Хэш предыдущего блока: Элемент, связывающий цепочку блоков.

## Хэширование транзакций (Transaction ID)
Каждая транзакция в блоке хэшируется для получения уникального идентификатора (txid), который затем становится листом дерева Меркла.

### Как работает:
- Берется сырой байтовый массив транзакции (входы, выходы, метаданные).
- Применяется двойное SHA-256.
- Результат — txid, 32-байтовый хэш (64 символа в hex).

### Роль в цепочке:
txid — это начальная точка "цепочки" внутри блока. Они передаются в дерево Меркла как листья.

## Хэш блока (Proof-of-Work)
Хэш блока — это результат хэширования заголовка блока. Он связывает текущий блок с предыдущим и используется в майнинге для Proof-of-Work.

### Как работает:
- Заголовок блока (80 байт) включает:
  - Версия (4 байта).
  - Хэш предыдущего блока (32 байта).
  - Корень Меркла (32 байта).
  - Временная метка (4 байта).
  - Сложность (Bits, 4 байта).
  - Нонс (4 байта).
- Заголовок хэшируется двойным SHA-256.
- Майнеры изменяют nonсe, пока хэш не станет меньше целевого значения сложности (начинается с нужного числа нулей).

### Роль в цепочке:
Хэш блока — это звено, связывающее текущий блок с предыдущим. Он включается в заголовок следующего блока как prev_block_hash.

Хэш предыдущего блока
Хэш предыдущего блока — это элемент заголовка текущего блока, который обеспечивает непрерывность цепочки.

### Как работает:
- Берется хэш блока предыдущего блока (результат ComputeBlockHash для предыдущего блока).
- Вставляется в заголовок текущего блока как 32-байтовое поле.
- Гарантирует, что изменение любого блока ломает всю цепочку.

### Роль в цепочке:
Создаёт "цепочку" блоков: каждый хэш блока зависит от предыдущего, формируя блокчейн.

## Связь всех частей
1. Транзакции → txid: Каждая транзакция хэшируется в txid.
2. txid → Корень Меркла: txid объединяются в дерево Меркла, итог — корень.
3. Корень Меркла → Хэш блока: Корень включается в заголовок блока, который хэшируется для получения хэша блока.
4. Хэш блока → Следующий блок: Хэш текущего блока становится prev_block_hash в заголовке следующего блока.

- Полная цепочка:
  
  ``` Транзакция → txid → Лист дерева → Корень Меркла → Заголовок блока → Хэш блока → Хэш предыдущего блока в следующем блоке. ```



